This is a user manual for SIF v3.

Words of caution:
1. Please make sure to fully test it in the creative before building in survival! Check the server core before building. It is not guaranteed to work properly for server cores that are not vanilla/fabric (forge seems to be all right, but I haven't tested it). After building, first verify the schematic, then back up the save, and finally start the machine.
2. If you don't know how to prevent wrong nether portal connection/cannot design a collection/cannot tell what the functions of each component are/don't know how to repair it if it is broken, you are not suitable for building such a complex machine. You can certainly try to install it, but you will be very painful. Please don't transfer this pain to the author.
3. The main schematics were made in 1.20.1. The schematics may be messed up if opened in other versions. You can use nbtExplorer to modify the schematic version or use a client mod that supports modifying the schematic version. The collection schematic was made in 1.20.4 with experimental features.

Building Guide:
1. How to build? Follow the schematics step-by-step, and verify schematics on each step. Back up the save after you completed step3, then open the lava clock on the bottom of pigman farm(there's a button there, just press it). Finally press the lever to start the farm. Note that, after placing the stone buttons in step 2, the pistons will extend and break the buttons. This is intended. To count, there are 67 of them.
2. The explosion chamber in the schematics is very close to other components, and there is not much space left for collection. If necessary, you can move the explosion chamber farther away. If you can't tell which parts belong to the explosion chamber, jump to the second point of the Word of caution.
3. The part of control circuit that locks hopper carts and pigman farm also work as the chunk loader control line. The loader are not necessary, so they doesn't become part of the schematic, but if your server does not have carpet bots or there are people always wandering around breaking farms in your server, it is highly recommended to use loaders. The machine is slightly smaller than the 6x10 chunks, so you need 5 loaders (you need to ensure that the tnt is not in lazy loading chunk). Be sure not to connect to the nether portals of the pigman farm: this mainly rely on the adjustment of the y coordinate of the portals.For example, if the nether portals on the nether side is at y=128, the portals of chunk loaders should also be close to y=128 while portals of pigman farm should be lower. The recommended loader design is in the loader.litematic. The pigman spawning inside the loaders will cause a lot of trouble. Loaders using boat rather than minecarts are completely pigman-safe and are more recommended.
4. Although the machine as a whole will not be covered with snow, building it on clear weather will still save a lot of trouble.
5. There is a 1*2*3 lava clock at the bottom of the pigman farm. After the construction is completed, fill the dispenser with a lava bucket and press the button to start it. This clock is always on. It should not cross chunks(but chunk section is OK). It's unload safe but it is still recommended to check it every time you start the machine.
6. There is a chestboat in the pigman farm. You need to spawn the snow golem first, then dispense the boat and row the boat forward till end (see the schematics for detail), then stand on the polished deepslate wall and attack the randomly spawned pigman to enrage them, and then lead the pigmen to the middle. The boat's range of receiving passengers is its collision box expanding 0.2 blocks on all four directions, hence, although it seems that the boat is not in the pigmen's falling path, the pigmen can still get on the boat and get a pedicure by the snow golem. Finally you should leave the farm so that the collective anger transfers to the snow golem.
7. This machine has no directionality or positionality, but if you want to change the direction, you need to re-make the schematics yourself, because there is a vanilla bug: the orientation of bells will not change after rotating/mirroring, causing the clock to break as soon as it is updated. (this is a bug in the block state of the bell, not a bug of litematica). Note that there are four hidden bells in the conveyor.
8. There is almost no dangerous observers when building step-by-step schematics (but you need to place the flying machines last). The method of building a flat platform in step 1 and then shaping it with the flying machines is @Undecentions's request. If you don't like it, you can just make the flying machines and platform like step 2. The only thing you need to pay attention to is that you need to add an unmovable block under the observer at the front of each flying machine to block it, and then build it layer by layer (rather than placing the flying machines last), and finally remove the unmovable block. If you use a liematica printer, it is recommended to use this method.

How to use:
1. When turning on the machine, pull down the lever, then hold a diamond pickaxe or netherite pickaxe with at least enchantments Efficiency III Unbreaking III Mending Silk Touch, aim at the target block and hold attack. Both real player and bots are OK. If you are not using a diamond pickaxe/netherite pickaxe, or your unbreaking enchantment is not level 3, or your game difficulty is not difficult, you need to increase the size of the pigman farm. If you have at least Haste I effect, you only need Efficiency II.
2. After shutting down, the flying machines will take several minutes(at most somewhere around 2874gt) to stop completely, and ice will still being delivered during this time. No ice delivery does not mean that the flying machines has stopped completely. You need to wait for the redstone lamps to stop and wait for 15 extra seconds before leaving the machine. If you use a loader, it will continue to load for 15 seconds after the loader is turned off, so you don't have to worry about this problem.

Version Compatibility
1.19+; 1.17+ should replace chestboat with boat; 1.16+ should replace polished deepslate

Lag
1.20.1 with lithium 13500H@3.0GHz DDR4 3200 using MCDR at clear midnight
off, with pigman farm running: 0.30mspt
on: 5.31mspt