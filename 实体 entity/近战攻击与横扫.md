# 攻击冷却相关：

## 攻击力 = 基础攻击力 + 魔咒攻击力

### 1. 基础攻击力：三个部分求和组成
1. 基值：玩家为1
2. 手持物攻击力：钻石剑为6(游戏中的7包含了玩家的基值1)
3. 状态效果：力量n为伤害+3n，虚弱n为伤害-4n

### 2. 魔咒攻击力：
1. 锋利n级为+(0.5n+0.5)
2. 亡灵杀手n级为+2.5n，只对对应生物其效果：僵尸类、骷髅类、凋灵类、幻翼
3. 节肢杀手n级为+2.5n：两种蜘蛛、蠹虫、末影螨、蜜蜂；会额外添加1~1+0.5n秒的缓慢4
4. 穿刺n级为+2.5n，只对水生类有效：两种守卫者、两种鱿鱼、桶装鱼、海龟、海豚、美西螈、蝌蚪

### 3. 额外攻击力：
目前只有重锤有，详情请见wiki

## 暴击
触发后攻击力会乘1.5倍，条件：
1. 玩家在“自由落体”(对以下条件的归类)：
    1. 下落高度 > 0
    2. 不能在地面(onGround)：甚至也不能站在硬碰撞箱的实体上(船、竹筏、潜影贝)
    3. 不能在可攀爬方块里：net.minecraft.world.entity.LivingEntity#onClimbable
    4. 不能碰到水：net.minecraft.world.entity.Entity#isInWater
    5. 不是乘客
2. 玩家攻击的是livingEntity类的实体(生物、玩家、盔甲架)
3. 不在疾跑
4. 不能有失明效果


## 攻击速度：
### 基础攻击速度(ATTACK_SPEED)：
1. 空手(4)，一般物品(4)，剑(1.6)，镐(1.2)，锹(1)，三叉戟(1.1)，重锤(0.6)
2. 斧头和锄头材质越好，基础攻击速度越大，钻石和下界合3. 金的斧头为1，钻石和下界合金锄头为4
3. 急迫/挖掘疲劳：每等级**加/减**10%
    
### 当前物品的攻击冷却时间(简称AttackCD)：
    getCurrentItemAttackStrengthDelay() = 20.0 / ATTACK_SPEED

### 距离上次攻击时间(lastAttackTime)：
        net.minecraft.world.entity.LivingEntity#attackStrengthTicker

### 攻击力度(AttackStrengthScale，百分比)：
        net.minecraft.world.entity.player.Player#getAttackStrengthScale
        AttackStrengthScale = clamp( (lastAttackTime + 0.5) / AttackCD, 0, 1)

## 横扫
攻击者玩家必须满足的条件：
1. 攻击成功
2. 攻击冷却度>90%
3. 攻击不为暴击
4. 落地(onGround) (通常不能在载具上，不在攀爬，可以在水里)
5. 距离上个tick位移“不过大”(需要进一步看代码)




攻击成功与失败：
		一定失败(芜笙、无事件)：基础进展攻击力 <= 0 && 魔咒攻击力 = 0
		免疫造成的失败(特殊声音)：基础攻击力 > 0 && (生物免疫此伤害 || 正在死亡)
		冷却造成的失败(特殊声音)：基础攻击力 > 0 && 伤害未超出受攻击者正在的冷却时间内的历史最大伤害
		除此之外都成功(成功声音)

触发横扫的前置条件：
	攻击者玩家：
		1. 攻击成功
		2. 攻击冷却度>90%
		3. 攻击不为暴击 (例如跳砍)
		4. 落地(onGround) (通常不能在载具上，不在攀爬，可以在水里)
		5. 距离上个tick位移“不过大”(需要进一步看代码)
	被横扫的实体：
		被攻击实体碰撞箱四周膨胀1m，上下膨胀0.25m，与这个膨胀区域发生碰撞的实体满足下列条件都会被横扫攻击：
			1. 直线距离攻击者玩家 < 3m，
			2. 不是玩家的“盟友”(盟友包含：同队伍，被该玩家驯服的动物，与玩家产生联系的悦灵；另外唤魔者和恼鬼也是盟友关系)
			3. Marker为true的盔甲架